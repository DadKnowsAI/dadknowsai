<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Dad Knows AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      :root { --blue:#2563eb; --blue-d:#1d4ed8; --bg:#f9fafb; --text:#111; }
      body {
        font-family: system-ui, sans-serif;
        margin: 0; padding: 2rem;
        background: var(--bg); color: var(--text);
        display:flex; flex-direction:column; align-items:center; text-align:center; min-height:100vh;
      }
      h1 { font-size: clamp(32px,5vw,48px); margin: 0 0 .5rem; }
      h3.tagline { font-size:1.25rem; font-weight:500; margin:0 0 1.5rem; color:#444; }
      p.lead { font-size:1.2rem; line-height:1.5; max-width:700px; margin:1rem auto 2rem; }
      .button {
        display:inline-block; margin-top:1rem; padding:.75rem 1.25rem;
        background:var(--blue); color:#fff; border-radius:8px; text-decoration:none; font-weight:600;
      }
      .button:hover { background:var(--blue-d); }

      .chatbox {
        margin-top:1.5rem; background:#fff; border:1px solid #ddd; border-radius:10px;
        padding:1rem; width:100%; max-width:720px; text-align:left; box-shadow:0 2px 6px rgba(0,0,0,.08);
      }
      .chatbox h2 { font-size:1.25rem; margin:.25rem 0 1rem; text-align:center; }

      .messages {
        border:1px solid #eee; border-radius:8px; background:#fafafa;
        padding:.75rem; height:260px; overflow-y:auto; margin-bottom:1rem;
      }
      .msg { margin:.25rem 0; }
      .msg.you strong { color:#0f172a; }
      .msg.bot strong { color:var(--blue-d); }

      .input-row { display:flex; gap:.5rem; }
      .input-row input {
        flex:1; padding:1rem; font-size:1.1rem; font-weight:600;
        border:2px solid var(--blue); border-radius:8px;
      }
      .input-row button {
        padding:.85rem 1.1rem; font-size:1rem; font-weight:700;
        background:var(--blue); color:#fff; border:none; border-radius:8px; cursor:pointer; min-width:92px;
      }
      .input-row button:hover { background:var(--blue-d); }

      .note { margin-top:1rem; font-weight:600; color:#222; text-align:center; }
      .footer-space { height:1rem; }
    </style>
  </head>
  <body>
    <h1>ðŸ‘‹ Welcome to Dad Knows AI</h1>
    <h3 class="tagline">You have the experience. We have the horsepower.</h3>

    <div class="chatbox" role="region" aria-label="DadKnowsAI Chat">
      <h2>Ask me anything!</h2>

      <div class="messages" id="messages" aria-live="polite">
        <p class="msg bot"><strong>DadKnowsAI:</strong> Tell me what youâ€™re trying to do. Iâ€™ll give clear steps that work today.</p>
      </div>

      <div class="input-row">
        <input id="chat-input" type="text" placeholder="Type your message..." aria-label="Your message">
        <button id="send-btn" aria-label="Send message">Send</button>
      </div>

      <p class="note">âš¡ Responses are generated live by <span style="color:var(--blue);">DadKnowsAI</span></p>
    </div>

    <p class="lead">Helping everyday people use AI in plain English. From autocorrect to chatbots, AI is already part of your lifeâ€”letâ€™s make it work for you.</p>
    <a href="https://weeklycall.dadknowsai.com" class="button">Read the Newsletter</a>
    <div class="footer-space"></div>

    <!-- Chat script -->
    <script>
      const msgs = document.getElementById('messages');
      const input = document.getElementById('chat-input');
      const send  = document.getElementById('send-btn');
      const MAX_INPUT_CHARS = 700;

      function append(role, text, danger=false) {
        const p = document.createElement('p');
        p.className = `msg ${role === 'You' ? 'you' : 'bot'}`;
        if (danger) p.style.color = 'crimson';
        p.innerHTML = `<strong>${role}:</strong> ${text}`;
        msgs.appendChild(p);
        msgs.scrollTop = msgs.scrollHeight;
      }

      async function ask(text) {
        if (!text) return;
        if (text.length > MAX_INPUT_CHARS) {
          append('System', `Please keep messages under ${MAX_INPUT_CHARS} characters.`, true);
          return;
        }

        input.value = '';
        input.disabled = true; send.disabled = true;

        append('You', text);
        const typing = document.createElement('p');
        typing.id = 'typing'; typing.className = 'msg bot';
        typing.innerHTML = '<em>DadKnowsAI is typingâ€¦</em>';
        msgs.appendChild(typing); msgs.scrollTop = msgs.scrollHeight;

        try {
          const r = await fetch('/api/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: text })
          });
          const data = await r.json().catch(() => ({}));
          document.getElementById('typing')?.remove();

          if (!r.ok) {
            append('Error', data?.error || 'Request failed.', true);
          } else {
            append('DadKnowsAI', data.reply || '(no reply)');
          }
        } catch {
          document.getElementById('typing')?.remove();
          append('Error', 'Network error contacting DadKnowsAI.', true);
        } finally {
          input.disabled = false; send.disabled = false; input.focus();
        }
      }

      send.addEventListener('click', () => ask(input.value.trim()));
      input.addEventListener('keydown', e => { if (e.key === 'Enter') ask(input.value.trim()); });
    </script>
  </body>
</html>








